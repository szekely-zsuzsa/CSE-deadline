---
title: "no-deadline Srtoop: creating raw data from source"
author: "Zsuzsa Szekely"
date: '2021 12 01 '
output: html_document
---

# Load packages

```{r load packages}
if (!require("pacman")) install.packages("pacman")
pacman::p_load(tidyverse, osfr, janitor, purrrlyr, lubridate)
```

# Load helper functions

```{r load helper functions}
source("R/utils.R")
```

We will read the source data from a private repository because the datafiles contain personal data.

# Create local data structure

```{r}
# local_data_pth <- file.path("data","source")
# 
# create_local_structure(local_data_pth)
```

# Remove local data

Uncomment the following lines to remove the local Source data if needed.

```{r}
# remove_local_data(local_data_pth)
```

# Import and merge data

```{r import and merge data}
# Read in datafiles
source <- read_csv("deadline/data/source/source_data.csv", na = ".")
View(source)

# Read in participant identifiers data
# participant_id <- read_csv("data/source/participant_metadata.csv", 
#                            col_types = cols(consentTime = col_double(), # time of consent
#                                             eventLog = col_character(), # event log
#                                             userId = col_character() # user id of the participant. This value was specific in each case.
# ))
```

# Join data with participant_id...

# Deidentify participants

We need to remove any information that might identify the participants

```{r deidentify participants}
# join <- 
#   join %>% 
#   mutate(join = select(., -userId))
```

# Save each task separately

```{r save tasks}
write_tsv(source, file = ("deadline/data/raw/raw_data.tsv"))
```

Final tsv files were uploaded to OSF manually.